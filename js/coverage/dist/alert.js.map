{"version":3,"file":"alert.js","sources":["../../src/alert.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.5.0): alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport $ from 'jquery'\nimport Util from './util'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'alert'\nconst VERSION             = '4.5.0'\nconst DATA_KEY            = 'bs.alert'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\n\nconst SELECTOR_DISMISS = '[data-dismiss=\"alert\"]'\n\nconst EVENT_CLOSE          = `close${EVENT_KEY}`\nconst EVENT_CLOSED         = `closed${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_ALERT = 'alert'\nconst CLASS_NAME_FADE  = 'fade'\nconst CLASS_NAME_SHOW  = 'show'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Alert {\n  constructor(element) {\n    this._element = element\n  }\n\n  // Getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  // Public\n\n  close(element) {\n    let rootElement = this._element\n    if (element) {\n      rootElement = this._getRootElement(element)\n    }\n\n    const customEvent = this._triggerCloseEvent(rootElement)\n\n    if (customEvent.isDefaultPrevented()) {\n      return\n    }\n\n    this._removeElement(rootElement)\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    this._element = null\n  }\n\n  // Private\n\n  _getRootElement(element) {\n    const selector = Util.getSelectorFromElement(element)\n    let parent     = false\n\n    if (selector) {\n      parent = document.querySelector(selector)\n    }\n\n    if (!parent) {\n      parent = $(element).closest(`.${CLASS_NAME_ALERT}`)[0]\n    }\n\n    return parent\n  }\n\n  _triggerCloseEvent(element) {\n    const closeEvent = $.Event(EVENT_CLOSE)\n\n    $(element).trigger(closeEvent)\n    return closeEvent\n  }\n\n  _removeElement(element) {\n    $(element).removeClass(CLASS_NAME_SHOW)\n\n    if (!$(element).hasClass(CLASS_NAME_FADE)) {\n      this._destroyElement(element)\n      return\n    }\n\n    const transitionDuration = Util.getTransitionDurationFromElement(element)\n\n    $(element)\n      .one(Util.TRANSITION_END, (event) => this._destroyElement(element, event))\n      .emulateTransitionEnd(transitionDuration)\n  }\n\n  _destroyElement(element) {\n    $(element)\n      .detach()\n      .trigger(EVENT_CLOSED)\n      .remove()\n  }\n\n  // Static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      const $element = $(this)\n      let data       = $element.data(DATA_KEY)\n\n      if (!data) {\n        data = new Alert(this)\n        $element.data(DATA_KEY, data)\n      }\n\n      if (config === 'close') {\n        data[config](this)\n      }\n    })\n  }\n\n  static _handleDismiss(alertInstance) {\n    return function (event) {\n      if (event) {\n        event.preventDefault()\n      }\n\n      alertInstance.close(this)\n    }\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document).on(\n  EVENT_CLICK_DATA_API,\n  SELECTOR_DISMISS,\n  Alert._handleDismiss(new Alert())\n)\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME]             = Alert._jQueryInterface\n$.fn[NAME].Constructor = Alert\n$.fn[NAME].noConflict  = () => {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Alert._jQueryInterface\n}\n\nexport default Alert\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","SELECTOR_DISMISS","EVENT_CLOSE","EVENT_CLOSED","EVENT_CLICK_DATA_API","CLASS_NAME_ALERT","CLASS_NAME_FADE","CLASS_NAME_SHOW","Alert","constructor","element","_element","close","rootElement","_getRootElement","customEvent","_triggerCloseEvent","isDefaultPrevented","_removeElement","dispose","removeData","selector","Util","getSelectorFromElement","parent","document","querySelector","closest","closeEvent","Event","trigger","removeClass","hasClass","_destroyElement","transitionDuration","getTransitionDurationFromElement","one","TRANSITION_END","event","emulateTransitionEnd","detach","remove","_jQueryInterface","config","each","$element","data","_handleDismiss","alertInstance","preventDefault","on","Constructor","noConflict"],"mappings":"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"}